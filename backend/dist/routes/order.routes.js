import { Router } from "express";
import { requireAuth, requireRole } from "../middleware/requireAuth.js";
import { createOrder, verifyRazorpayPayment, listMyOrders, adminListOrders, adminUpdateOrderStatus, CreateOrderSchema, VerifyRazorpaySchema, adminUpdateOrderStatusSchema } from "../controllers/order.controller.js";
import { validateBody } from "../middleware/validate.js";
export const orderRouter = Router();
orderRouter.post("/", requireAuth, validateBody(CreateOrderSchema), createOrder);
orderRouter.post("/verify-razorpay", requireAuth, validateBody(VerifyRazorpaySchema), verifyRazorpayPayment);
orderRouter.get("/my", requireAuth, listMyOrders);
orderRouter.get("/admin", requireAuth, requireRole("admin"), adminListOrders);
orderRouter.put("/admin/:id/status", requireAuth, requireRole("admin"), validateBody(adminUpdateOrderStatusSchema), adminUpdateOrderStatus);
